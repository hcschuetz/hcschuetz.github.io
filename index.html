<!DOCTYPE html>
<html>
<head>
  <link rel="icon" type="image/svg" href="favicon-min.svg">
  <title>Code and Demos by Heribert Schütz</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel="stylesheet" href="https://unpkg.com/sanitize.css"/>
  <style>
    /*
    According to caniuse.com there are still too many browsers in use
    without CSS-nesting support.  So I unnested.
     */
    body {
      font-family: Arial, Helvetica, sans-serif;
      padding: 2rem;
      background-color: #ccd;
      color: #222;
    }
    .header {
      max-width: 50em;
      margin-bottom: 8ex;
    }
    #box-grid {
      display: grid;
      column-gap: 30px;
      align-items: start;
    }
    .column {
      display: flex;
      flex-direction: column;
    }
    .box {
      margin-bottom: 30px;
      max-width: 700px;
      padding: 12px;
      display: flow-root;
    }
    .box, #toc {
      box-shadow: 3px 4px 7px 3px #0008;
      background-color: #fff;
    }
    h1 {
      font-size: 200%;
      margin-bottom: 0;
    }
    h2 {
      margin-top: 0;
      font-size: 150%;
      font-weight: bold;
      border-bottom: 1px solid #222;
    }
    h3 {
      font-weight: bold;
      font-size: 120%;
      margin-top: 2ex;
      margin-bottom: 1ex;
    }
    img {
      display: block;
      width: 100%;
      margin: 0 auto 3ex auto;
    }
    code {
      font-size: 120%;
    }
    #toc {
      position: fixed;
      z-index: 10;
      top: 8px;
      right: 8px;
      padding: 10px;
      display: none;
    }
    summary {
      font-weight: bolder;
    }
    #toc-list {
      margin: 1ex 0 0 1em;
      /* re-enable numbering disabled by sanitize.css: */
      list-style-type: decimal;
    }
    #toc-list a {
      color: inherit;
      text-decoration: inherit;
    }
    #toc-list a:hover {
      color: #777;
    }
  </style>
</head>
<body>
  <div class="header">
  <h1>Code and Demos</h1>
  <p style="
    font-size: 120%;
    font-style: italic;
    margin: 0.5rem 0 2rem;
  ">Heribert Schütz</p>

  <p>
    Like many others I have implemented various experimental projects to
    investigate technologies or just for fun.
    This site contains a selection of projects that might
    also be of interest for others.
    (Have a look at my
    <a href="https://github.com/hcschuetz">Github home page</a>
    for even more projects.)
  </p>
  <p>
    While many of the demos work on both desktop and mobile devices,
    some expect a physical keyboard.
  </p>
  </div>

  <div id="aux">
  <div class="box" id="rendering-spheres">
    <img src="images/icosphere-texture.png">

    <h2>Rendering Spheres</h2>

    <p>
      You know how to render a sphere.
      Or you don't even care
      because your graphics library provides an API for creating a sphere.  
    </p>
    <p>
      Nevertheless, here are some ideas about rendering spheres
      that may be helpful for you
      (or for the developers of your favorite graphics lib).
      Some of these ideas are probably new.
      At least I have not found them elsewhere.
    </p>
    <p>
      In addition to the math/geometry aspects,
      with this code I also explored
    </p>
    <ul>
      <li>the BabylonJS 3D engine and</li>
      <li>using MobX (without React) for state management.</li>
    </ul>

    <h3>Octaspheres</h3>

    <a href="https://github.com/hcschuetz/octasphere/#readme">README</a>,
    <a href="octasphere/presentation/dist">presentation</a>
    (<a href="https://github.com/hcschuetz/octasphere/tree/main/presentation">Source</a>),
    <a href="octasphere/lab/dist">experimentation lab</a>
    (<a href="https://github.com/hcschuetz/octasphere/tree/main/lab">Source</a>)
  
    <p>
      This project investigates the rendering of an "octasphere",
      a sphere based on an octahedron.
      It suggests and compares several approaches for
      placing the auxiliary vertices of the sphere triangulation.
    </p>
  
    <h3>Texturing</h3>
  
    <a href="https://github.com/hcschuetz/sphere-texturing/#readme">README</a>,
    <a href="sphere-texturing/map-transformations/dist">presentation</a>
    (<a href="https://github.com/hcschuetz/sphere-texturing/tree/main/map-transformations">Source</a>),
    <a href="sphere-texturing/earth/dist">experimentation lab</a>
    (<a href="https://github.com/hcschuetz/sphere-texturing/tree/main/earth">Source</a>)
  
    <p>
      This project investigates ways to prepare and apply textures for a sphere.
      In particular it shows how to replace heavily distorted equirectangular maps
      with less distorted maps based on octaspheres and icospheres.
      It also provides memory-efficient sprite-sheet layouts.
    </p>
  </div>

  <div class="box" id="fft-performance">
    <img src="images/autocorrelation.png">

    <h2>Performance Study Based on the Fast Fourier Transformation (FFT)</h2>

    <a href="fft/build/">Demo</a>,
    <a href="https://github.com/hcschuetz/fft">Source</a>

    <p>
      With this project I investigated high-performance-computing capabilities
      of the Web platform.
      The Fast Fourier Transformation was chosen as a number-crunching example
      with non-trivial complexity,
      but which is still simple enough to implement various versions.
    </p>
    <p>
      The FFT implementations vary in several aspects:
    </p>
    <ul>
      <li>home-grown and third-party implementations</li>
      <li>from very naive to quite refined algorithms</li>
      <li>programming languages:
        TypeScript, C++, Rust, and even a small home-grown language
      </li>
      <li>runtime technologies:
        JavaScript, Web Assembly (WASM),
        native code (for comparison, not in the browser demo)
      </li>
    </ul>
    <p>
      The performance tests can take quite a while.
      Therefore they run in a Web Worker, avoiding a frozen UI
      and allowing to interrupt the tests.
    </p>
    <p>
      The project includes two application demos,
      which might be more entertaining than mere tests and benchmarks:
    </p>
    <ul>
      <li>
        <a href="fft/build/#ClockworkDemo">An animated graphical demo</a>
        (using SVG or the <code>Canvas</code> API)
        following a popular way to illustrate the FFT with complex values.
      </li>
      <li>
        <a href="fft/build#AudioDemo">An audio demo</a>
        using FFT to analyze sound input captured with the Web Audio API.
        This demo interactively explains the maths used for the analysis,
        following a paper by P.&nbsp;McLeod and G.&nbsp;Wyvill.
      </li>
    </ul>
  </div>

  <div class="box" id="guitar-simulation">
    <img src="images/notes.png" style="
      width: 76px;
      float: left;
      margin-right: 1em;
    ">

    <h2>Guitar Simulation</h2>

    <a href="guitar-simulation/">Demo</a> (keyboard required),
    <a href="https://github.com/hcschuetz/guitar-simulation">Source</a>

    <p>
      While the audio demo in the FFT project analyzes <em>incoming audio</em>,
      this project uses the Web Audio API to synthesize <em>outgoing audio</em>.
    </p>
  </div>

  <div class="box" id="todomvc-mobx-jsx">
    <img src="images/todos.png">

    <h2>TodoMVC with MobX, Custom Elements and JSX</h2>

    <a href="todomvc-mobx-jsx/dist/">Demo</a>,
    <a href="https://github.com/hcschuetz/todomvc-mobx-jsx">Source</a>

    <p>
      (The demo is just a clone of the standard TodoMVC demo,
      which you may have seen many times.
      Inspecting the DOM for its custom elements is more interesting.)
    </p>

    <p>
      In this project I have explored an approach for building web applications
      based on a reactive state
      (provided by <em>MobX</em> and <em><code>mobx-keystone</code></em>).
      The idea was that the reactive state can be mapped to a UI dynamically
      so that a powerful framework such as React is no more needed.
    </p>
    <p>
      I do, however, use a light-weight home-grown <em>JSX</em> implementation
      to achieve succinct and readable application code.
    </p>
    <p>
      <em>Custom elements</em>
      (one of the technologies for Web Components, supported directly by browsers)
      help to structure the application.
    </p>
    <p>
      The experiment was actually quite successful.
      The approach should be suitable for projects that require
      (or benefit from) reactive state management anyway.
      A typical example for this would be the configuration of complex products.
    </p>
  </div>

  <div class="box" id="graphics-sketchbook">
    <img src="images/teapot.png">

    <h2>Graphics Sketchbook</h2>

    <a href="graphics-sketchbook/dist/">Demo</a> (keyboard recommended),
    <a href="https://github.com/hcschuetz/graphics-sketchbook">Source</a>

    <p>
      Experiments with three.js and react-three-fiber.
    </p>
    <p>
      Features the Stanford Bunny, the Utah Teapot, and demos ported from Manim.
    </p>
  </div>

  <div class="box" id="gaussian-scaling">
    <img src="images/gaussian-integration.png">

    <h2>The Scaling Factor in the Gaussian Distribution</h2>

    <a href="gaussian-scaling/dist/">Demo</a> (keyboard recommended),
    <a href="https://github.com/hcschuetz/gaussian-scaling">Source</a>

    <p>
      This project had two goals:
    </p>
    <ol>
      <li>
        <p>
          Explaining the scaling factor
          <math>
            <semantics>
              <mrow>
                <mfrac>
                  <mn>1</mn>
                  <msqrt>
                    <mrow>
                      <mn>2</mn>
                      <mi>π</mi>
                    </mrow>
                  </msqrt>
                </mfrac>
              </mrow>
              <annotation>1/sqrt(2π)</annotation>
            </semantics>
          </math>
          in the formula for the
          Gaussian distribution (also called "normal" distribution).
        </p>
      </li>
      <li>
        <p>
          Experimenting with various web technologies, in particular
        </p>
        <ul>
          <li>
            <p>
              three.js and related tools for (dynamic) 3D graphics and
            </p>
          </li>
          <li>
            <p>
              rendering (dynamic) TeX formulas in HTML
            </p>
          </li>
        </ul>
        <p>
          to see whether something like Manim
          (see <a href="https://github.com/3b1b/manim">here</a>
          and <a href="https://github.com/ManimCommunity/manim">here</a>)
          could also be built on top of web technologies.
        </p>
      </li>
    </ol>
    <p>
      Goal #1 actually became obsolete when 3Blue1Brown published
      <a href="https://www.youtube.com/watch?v=cy8r7WSuT1I">his video series</a>
      on that same topic when I was about to get my presentation completed.
    </p>
    <p>
      But I think goal #2 was achieved.
      While my web-based tools still have limited functionality
      and would benefit from some polishing,
      I see no major obstacles against getting on a par with Manim.
    </p>
    <p>
      The web-based approach has its own advantages:
    </p>
    <ul>
      <li>Live interaction with the slides is possible.</li>
      <li>Slides can be published easily for the audience to play with.</li>
    </ul>
  </div>

  <div class="box" id="15-puzzle">
    <img src="images/15-puzzle.png" style="
      width: 158px;
      float: left;
      margin-right: 1em;
    ">

    <h2>Fifteen Puzzle</h2>

    <a href="15-puzzle/dist/">Demo</a>,
    <a href="https://github.com/hcschuetz/15-puzzle">Source</a>

    <p>
      An experimental/demo app from 2015 using React and Redux.
    </p>
    <p>
      In 2023 I have modernized the dev/build tools from webpack to vite.
      Furthermore I have added an explanation how to play the game.
    </p>
    <p>
      But the core implementation and libraries
      are still the historic ones from 2015.
    </p>
  </div>

  <div class="box" id="babylon-pointcloud-distribution">
    <img src="images/pointcloud.png">

    <h2>A Small Contribution to BabylonJS' PointsCloudSystem</h2>

    <p>
      This is a small example of "getting the maths right".
      I have provided fixes ensuring that
      random points are actually distributed uniformly over a given surface.
    </p>
    <a href="https://forum.babylonjs.com/t/pointscloudsystem-unequal-distribution-of-points/48981">
      Forum Discussion
    </a>
    <p>
      (Notice that meanwhile the two playground examples
      <a href="https://playground.babylonjs.com/#UI95UC#2446">here</a> and
      <a href="https://playground.babylonjs.com/#UI95UC#2447">here</a>
      show the new corrected behavior by default.
      To see the old behavior, select version 5.x in the version menu.)
    </p>
    <p>
      Commits/pull requests:
    </p>
    <ul>
      <li>
        <a href="https://github.com/BabylonJS/Babylon.js/pull/14900/commits/fa136ce341ebb412e76b1d4d3d80077854725ac3">
          Uniform random distribution within a triangle (fix)
        </a>
      </li>
      <li>
        <a href="https://github.com/BabylonJS/Babylon.js/pull/14902/commits/4dce76116f019e7fff38ffdf737784cefb6066e0">
          Uniform random distribution across triangles (fix)
        </a>
      </li>
      <li>
        <a href="https://github.com/BabylonJS/Babylon.js/pull/14903/commits/010cedf53d1abefc9f59f23a7e43835e0e17c070">
          Computation of triangle areas (code simplification)
        </a>
      </li>
    </ul>
  </div>
  </div>
  <div id="box-grid"></div>

  <details id="toc">
    <summary>Contents</summary>
    <nav>
      <ol id="toc-list"></ol>
    </nav>
  </details>

  <script type="module">
    // Simple implementation of a "masonry" layout.
    // Reacts to window resizing but not to content changes.
    // (For the time being our content is static.)

    const sleep = ms => new Promise(resolve => setTimeout(resolve, ms));

    const aux = document.querySelector("#aux");
    // Hide aux only if this script actually runs, not in CSS/HTML above:
    aux.style.display = "none";
    const boxGrid = document.querySelector("#box-grid");
    const boxes = [...document.querySelectorAll(".box")];
    const cols = [];

    let lastWidth = -1;
    let invocationNo = 0;

    async function doLayout() {
      const winWidth = window.innerWidth;
      if (winWidth === lastWidth) {
        // Some mobiles fire resize events even when the size actually has not
        // changed.  Do nothing in this case.
        return;
      }
      lastWidth = winWidth;

      const nCols = Math.min(boxes.length, Math.max(1, Math.floor(winWidth / 600)));
      if (nCols === 1 && cols.length === 1) {
        // No re-ordering possible in a single column:
        return;
      }

      const myInvocationNo = ++invocationNo;

      aux.append(...boxes);

      boxGrid.style.gridTemplateColumns = `repeat(${nCols}, 1fr)`;
      while (cols.length < nCols) {
        const col = document.createElement("div");
        col.classList.add("column");
        cols.push(col);
        boxGrid.append(col);
      }
      while (cols.length > nCols) {
        boxGrid.removeChild(cols.pop());
      }

      for (const box of boxes) {
        // Technically, sleeping is not needed.
        // It just looks better, but this is a matter of taste.
        await sleep(50);
        // Check for staleness upon wake-up:
        if (myInvocationNo < invocationNo) {
          // A more recent invocation is running.  So stop this one.
          return;
        }

        // Append the box to the (currently) shortest column:
        let shortestCol = null;
        let shortestColHeight = Infinity;
        for (const col of cols) {
          if (col.offsetHeight < shortestColHeight) {
            shortestCol = col;
            shortestColHeight = col.offsetHeight;
          }
        }
        shortestCol.appendChild(box);

        if (document.location.hash === `#${box.id}`) {
          box.scrollIntoView({behavior: "smooth"});
        }
      }
    }

    window.addEventListener("resize", doLayout);
    doLayout();
  </script>

  <script type="module">
    // Make the TOC box only visible is this script is actually running:
    document.querySelector("#toc").style.display = "inherit";

    const tocList = document.querySelector("#toc-list");
    document.querySelectorAll(".box").forEach(box => {
      const li = tocList.appendChild(document.createElement("li"));
      const a = li.appendChild(document.createElement("a"));
      a.href = `#${box.id}`;
      a.textContent = box.querySelector("h2").textContent;
    })
  </script>
</body>
</html>
